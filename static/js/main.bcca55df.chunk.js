(this["webpackJsonpnews-explorer-front"]=this["webpackJsonpnews-explorer-front"]||[]).push([[0],Array(30).concat([function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),s=n.n(c),r=n(22),o=n.n(r),i=n(9),l=(n(30),n(24)),u=n(11),d=n(2),j=n(3),b=(n(31),n(4)),h=s.a.createContext(),m=n(6);n(32),n(33),n(34);var p=function(e){var t=e.classes,n=e.children;return Object(a.jsx)("div",{className:"container ".concat(t),children:n})},f=n.p+"static/media/diana.1a1837cc.jpg",O={aboutDescription1:"Hi, I'm Diana and I enjoy programming! I\u2019m a frontend developer, Practicum by Yandex graduate, having 10 months experience at various web-development projects (MERN stack), including a team lead experience at a promotion project for children\u2019s bookshop. For me it's really essential to improve my skills with every project, so I\u2019m dreaming to gain experience in an international developing company in an ambitious team.",aboutDescription2:"I'm also an avid trekker and nature lover. I love listening to audiobooks and lectures on design, art, architecture and neuropsychology, making pottery and listening to jazz and classical music."};n(35);var g=function(e){var t=e.classes,n=e.title;return Object(a.jsx)("h2",{className:"section-title ".concat(t),children:n})};var _=function(){return Object(a.jsx)(p,{children:Object(a.jsxs)("section",{className:"about",children:[Object(a.jsx)("img",{className:"about__photo",src:f,alt:"Author avatar"}),Object(a.jsxs)("div",{className:"about__description",children:[Object(a.jsx)(g,{classes:"about__title",title:"About me"}),Object(a.jsx)("p",{className:"about__text",children:O.aboutDescription1}),Object(a.jsx)("p",{className:"about__text",children:O.aboutDescription2})]})]})})};n(36),n(37),n(38);var v=function(e){var t=e.onClick,n=e.onMouseEnter,c=e.onMouseLeave,s=e.disabled,r=void 0!==s&&s,o=e.forwardedRef,i=e.children,l=e.buttonClasses;return Object(a.jsx)("button",{className:"button ".concat(l),ref:o,onClick:t,onMouseEnter:n,onMouseLeave:c,disabled:r,children:i})};function x(){var e=Object(c.useState)({}),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)({}),r=Object(j.a)(s,2),o=r[0],i=r[1],l=Object(c.useState)(!1),b=Object(j.a)(l,2),h=b[0],m=b[1],p=Object(c.useCallback)((function(){a({}),i({}),m(!1)}),[]);return{values:n,setValues:a,handleChange:function(e){var t=e.target,c=t.name;if("password"===c){var s=t.value.trim().replace(/\s/g,"");a(Object(d.a)(Object(d.a)({},n),{},Object(u.a)({},c,s))),i(Object(d.a)(Object(d.a)({},o),{},Object(u.a)({},c,t.validationMessage)))}else{var r=t.value.trim();a(Object(d.a)(Object(d.a)({},n),{},Object(u.a)({},c,r))),i(Object(d.a)(Object(d.a)({},o),{},Object(u.a)({},c,t.validationMessage)))}m(e.target.closest("form").checkValidity())},errors:o,resetForm:p,isValid:h}}var N=function(e){var t=e.handleSearch,n=Object(c.useState)(!1),s=Object(j.a)(n,2),r=s[0],o=s[1],i=x(),l=i.values,u=i.handleChange,d=i.resetForm;return Object(a.jsxs)("form",{className:"search-form",onSubmit:function(e){e.preventDefault();var n=e.target.searchForm.value;if(!n.replace(/\s/g,"").trim().length)return e.target.searchForm.value="",o(!0),void d();t(n)},noValidate:!0,children:[Object(a.jsx)("input",{type:"text",name:"searchForm",value:l.search,className:"search-form__input ".concat(r&&"search-form__input_warning"),placeholder:r?"Please, fill in a keyword":"Fill in the search keywords",required:!0,onFocus:function(){o(!1)},onChange:u}),Object(a.jsx)(v,{buttonClasses:"button_type_text button_type_submit search-form__button",type:"submit",children:"Search"})]})};var w=function(e){return Object(a.jsx)("section",{className:"banner",children:Object(a.jsx)(p,{children:Object(a.jsxs)("div",{className:"banner__container",children:[Object(a.jsxs)("div",{className:"banner__text",children:[Object(a.jsx)("h1",{className:"banner__title",children:"What's going on in the world?"}),Object(a.jsx)("p",{className:"banner__description",children:"Find the latest articles on any topic and save them to your bookmarks."})]}),Object(a.jsx)(N,Object(d.a)({},e))]})})})};n(39),n(40),n(41);var k=function(e){var t=e.classes,n=e.refObj,c=e.children;return Object(a.jsx)("div",{className:"info-detail ".concat(t),ref:n,children:c})},y=n.p+"static/media/not-found-icon.b16e6896.svg";var S=function(e){var t=e.card,n=e.isLoggedIn,s=e.savedArticles,r=e.handleSaveArticle,o=e.handleDeleteArticle,i=t.keyword,l=t.title,u=t.text,d=t.date,h=t.source,m=t.link,p=t.image,f=Object(c.useRef)(),O=Object(c.useRef)(),g=Object(c.useRef)(),_=Object(c.useState)(null),x=Object(j.a)(_,2),N=x[0],w=x[1];Object(c.useEffect)((function(){if(s){var e=s.find((function(e){return e.title===t.title&&e.link===t.link}));e&&(w(!0),w(e))}}),[]);var S=function(){g.current.classList.add("info-detail_visible")},E=function(){g.current.classList.remove("info-detail_visible")},C=new Date(d).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric"});return Object(a.jsxs)("li",{className:"news-card",ref:f,children:[Object(a.jsx)("a",{href:m,className:"news-card__link",target:"_blank",rel:"noreferrer",children:p?Object(a.jsx)("img",{className:"news-card__image",src:p,alt:l,onError:function(e){e.target.src=y,e.target.className="news-card__image news-card__image_not-found"}}):Object(a.jsx)("img",{className:"news-card__image news-card__image_not-found",src:y,alt:l})}),Object(a.jsxs)(b.d,{children:[Object(a.jsxs)(b.b,{path:"/saved-news",children:[i&&Object(a.jsx)("p",{className:"news-card__keyword",children:i}),Object(a.jsx)(k,{classes:"",refObj:g,children:"Remove from bookmarks"}),Object(a.jsx)(v,{onMouseEnter:S,onMouseLeave:E,onClick:function(){o(t._id)},buttonClasses:"button_type_icon button_type_icon_trash "})]}),Object(a.jsxs)(b.b,{path:"/",children:[!n&&Object(a.jsx)(k,{classes:"",refObj:g,children:"Log in to add bookmarks"}),n&&Object(a.jsx)(k,{classes:"",refObj:g,children:N?"Remove from favorites":"Add to favourites"}),Object(a.jsx)(v,{forwardedRef:O,onMouseEnter:S,onMouseLeave:E,buttonClasses:"button_type_icon ".concat(N?"button_type_icon_bookmark_saved":"button_type_icon_bookmark_regular"," "),onClick:n?function(){N||r(t),N&&o(N._id)}:void 0})]})]}),Object(a.jsxs)("div",{className:"news-card__info",children:[Object(a.jsx)("time",{className:"news-card__date",dateTime:d,children:C}),Object(a.jsx)("h3",{className:"news-card__title",children:l}),Object(a.jsx)("p",{className:"news-card__text",children:u}),Object(a.jsx)("a",{href:m,target:"_blank",rel:"noreferrer",className:"news-card__source",children:h})]})]})};var E=function(e){var t=e.type,n=e.cards,s=e.savedArticles,r=Object(m.a)(e,["type","cards","savedArticles"]),o=Object(c.useState)(3),i=Object(j.a)(o,2),l=i[0],u=i[1];return Object(a.jsx)("section",{className:"news",children:Object(a.jsxs)(p,{children:["search"===t&&Object(a.jsx)(g,{classes:"news__title",title:"Search results"}),"bookmarks"===t&&Object(a.jsx)("ul",{className:"news__list",children:s.map((function(e){return Object(a.jsx)(S,Object(d.a)({card:e},r),e._id)}))}),"search"===t&&Object(a.jsx)("ul",{className:"news__list",children:n.slice(0,l).map((function(e){return Object(a.jsx)(S,Object(d.a)({card:e,savedArticles:s},r),e._id||Math.random())}))}),"search"===t&&l<n.length?Object(a.jsx)(v,{buttonClasses:"button_type_text button_type_more news__button-more",onClick:function(){u(l+3)},children:"Show more"}):""]})})};n(50);var C=function(e){var t=e.type;return Object(a.jsxs)("div",{className:"not-found",children:[Object(a.jsx)("img",{className:"not-found__icon",src:y,alt:"Not found"}),Object(a.jsx)("h2",{className:"not-found__title",children:"notfound"===t?"Not found":"Server error"}),Object(a.jsx)("p",{className:"not-found__text",children:"notfound"===t?"Unfortunately, nothing was found for your search query.":"Unfortunately, an error occurred during the request. There may be a connection problem or the server is unavailable. Wait a bit and try again."})]})};n(51);var A=function(){return Object(a.jsxs)("div",{className:"preloader",children:[Object(a.jsx)("i",{className:"preloader__circle"}),Object(a.jsx)("p",{className:"preloader__text",children:"Searching ..."})]})};var L=function(e){var t=e.searchState,n=Object(m.a)(e,["searchState"]);return Object(a.jsxs)("main",{className:"main",children:[Object(a.jsx)(w,Object(d.a)({},n)),"searching"===t&&Object(a.jsx)(A,{}),"notFound"===t&&Object(a.jsx)(C,{type:"notfound"}),"error"===t&&Object(a.jsx)(C,{type:"error"}),"found"===t&&Object(a.jsx)(E,Object(d.a)({type:"search"},n)),Object(a.jsx)(_,{})]})};n(52),n(53);var T=function(){return Object(a.jsx)("div",{className:"logo",children:"News Explorer"})};n(54);var P=function(e){var t=e.theme,n=e.isNavMenuOpened,c=e.toggleNavMenu;return Object(a.jsx)("button",{className:"hamburger hamburger_theme_".concat(t," ").concat(n?"hamburger_cross":"hamburger_bar"),onClick:function(){c(!n)}})},I=(n(55),n.p+"static/media/logout-icon-dark.9ed72999.svg"),D=n.p+"static/media/logout-icon-light.d5d5935d.svg";var R=function(e){var t=e.theme,n=e.isNavMenuOpened,s=e.isLoggedIn,r=e.openPopup,o=e.signOut,l=e.scrollToTop,u=e.toggleNavMenu,d=function(){u(!1),l()},j=Object(c.useContext)(h);return Object(a.jsxs)("nav",{className:"navigation navigation_theme_".concat(t," ").concat(n?"navigation_visible":""),children:[Object(a.jsxs)("ul",{className:"navigation__list",children:[Object(a.jsx)("li",{className:"navigation__item",children:Object(a.jsx)(i.c,{to:"/",exact:!0,className:"navigation__link",activeClassName:"navigation__link_active_theme_".concat(t),onClick:d,children:"Home"})}),s&&Object(a.jsx)("li",{className:"navigation__item",children:Object(a.jsx)(i.c,{to:"/saved-news",className:"navigation__link",activeClassName:"navigation__link_active_theme_".concat(t),onClick:d,children:"Bookmarks"})})]}),Object(a.jsx)(v,{buttonClasses:"button_type_text navigation__button navigation__button_theme_".concat(t),onClick:function(){s?o():(u(!1),r("login"))},children:s?Object(a.jsxs)("span",{className:"navigation__authorized-button",children:[Object(a.jsx)("span",{className:"navigation__authorized-button-title",children:j.name}),Object(a.jsx)("img",{className:"navigation__logout-icon",src:"dark"===t?D:I,alt:"Log out"})]}):"Login"})]})};var F=function(e){var t=e.theme,n=e.openedPopup,s=e.isNavMenuOpened,r=e.scrollToTop,o=Object(c.useRef)(null),l=Object(c.useCallback)((function(){window.scrollY>56?o.current.classList.add("header_blurred"):window.scrollY<56&&o.current.classList.remove("header_blurred")}),[]);return Object(c.useEffect)((function(){return window.addEventListener("scroll",l),function(){return window.removeEventListener("scroll",l)}}),[l]),Object(a.jsx)("header",{ref:o,className:"header header_theme_".concat(t," ").concat(s?"":"header_transparent"),children:Object(a.jsx)(p,{children:Object(a.jsxs)("div",{className:"header__container",children:[Object(a.jsx)(i.b,{className:"header__logo",to:"/",onClick:r,children:Object(a.jsx)(T,{})}),!n&&Object(a.jsx)(P,Object(d.a)({},e)),Object(a.jsx)(R,Object(d.a)({},e))]})})})};n(56),n(57);var M=function(e){var t=e.savedArticles,n=Object(c.useContext)(h),s=Object(c.useState)([]),r=Object(j.a)(s,2),o=r[0],i=r[1];return Object(c.useEffect)((function(){var e=t.map((function(e){return e.keyword[0].toUpperCase()+e.keyword.slice(1)}));i(function(e){var t={};return e.forEach((function(e){t[e]=0})),e.filter((function(e){return t[e]+=1,1===t[e]})).sort((function(e,n){return t[n]-t[e]}))}(e))}),[t]),Object(a.jsx)(p,{children:Object(a.jsxs)("div",{className:"saved-news-header",children:[Object(a.jsx)("p",{className:"saved-news-header__heading",children:"Bookmarks"}),Object(a.jsx)(g,{classes:"saved-news-header__title",title:"".concat(n.name,", you have ").concat(t.length," saved articles ")}),o.length>0&&Object(a.jsxs)("p",{className:"saved-news-header__keywords-para",children:["on these keywords: ",Object(a.jsx)("span",{className:"saved-news-header__keyword",children:o.length>3?"".concat(o[0],", ").concat(o[1]," and ").concat(o.length-2," other ones"):"".concat(o.join(", "))})]})]})})};var U=function(e){var t=e.setTheme,n=e.savedArticles,s=Object(m.a)(e,["setTheme","savedArticles"]);return Object(c.useEffect)((function(){return t("light"),function(){t("dark")}}),[t]),Object(a.jsxs)("section",{className:"saved-news",children:[Object(a.jsx)(M,{savedArticles:n}),Object(a.jsx)(E,Object(d.a)(Object(d.a)({cards:n,savedArticles:n},s),{},{type:"bookmarks"}))]})},z=(n(58),n.p+"static/media/git.ac1caa48.svg"),B=n.p+"static/media/linked-in.bea26c67.svg";var q=function(e){return Object(a.jsx)(p,{children:Object(a.jsxs)("footer",{className:"footer",children:[Object(a.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Diana Vlasenkova, Powered by News API"}),Object(a.jsxs)("div",{className:"footer__links",children:[Object(a.jsx)("nav",{className:"footer__nav",children:Object(a.jsxs)("ul",{className:"footer__nav-list",children:[Object(a.jsx)("li",{className:"footer__nav-item",children:Object(a.jsx)(i.b,{to:"/",onClick:e.scrollToTop,className:"footer__nav-link",children:"Home"})}),Object(a.jsx)("li",{className:"footer__nav-item",children:Object(a.jsx)("a",{className:"footer__nav-link",href:"https://practicum.yandex.com/",target:"_blank",rel:"noreferrer",children:"Yandex.Practicum"})})]})}),Object(a.jsxs)("ul",{className:"footer__social",children:[Object(a.jsx)("li",{className:"footer__social-item",children:Object(a.jsx)("a",{className:"footer__social-link",href:"https://github.com/dianadomino24/",target:"_blank",rel:"noreferrer",children:Object(a.jsx)("img",{src:z,alt:"GitHub"})})}),Object(a.jsx)("li",{className:"footer__social-item",children:Object(a.jsx)("a",{className:"footer__social-link",href:"https://www.linkedin.com/in/diana-vlasenkova/",target:"_blank",rel:"noreferrer",children:Object(a.jsx)("img",{src:B,alt:"LinkedIn"})})})]})]})]})})};n(59),n(60);var J=function(e){var t=e.type,n=e.title,s=e.switchForm,r=e.buttonName,o=e.linkName,i=e.handleSubmit,l=e.errorTotal,u=e.onChange,d=e.setErrorTotal,j=x(),b=j.values,h=j.handleChange,m=j.errors,p=j.resetForm,f=j.isValid,O=function(e){d(""),h(e),u(e)};return Object(c.useEffect)((function(){p()}),[p]),Object(a.jsxs)("form",{className:"register-login",onSubmit:function(e){e.preventDefault();var t=b.email,n=b.password,a=b.name;i(t,n,p,a)},children:[Object(a.jsx)("h2",{className:"register-login__title popup__title",children:n}),Object(a.jsxs)("fieldset",{className:"register-login__fieldset",children:[Object(a.jsxs)("label",{className:"register-login__label",children:["Email",Object(a.jsx)("input",{type:"email",name:"email",value:b.email,onChange:O,className:"register-login__input",placeholder:"Fill in email",required:!0,minLength:"2",maxLength:"80"}),Object(a.jsx)("span",{className:"register-login__error",children:m.email||""})]}),Object(a.jsxs)("label",{className:"register-login__label",children:["Password",Object(a.jsx)("input",{type:"password",name:"password",value:b.password,onChange:O,className:"register-login__input",placeholder:"Fill in password",required:!0,minLength:"6",maxLength:"15"}),Object(a.jsx)("span",{className:"register-login__error",children:m.password||""})]}),"register"===t&&Object(a.jsxs)("label",{className:"register-login__label",children:["Name",Object(a.jsx)("input",{type:"text",name:"name",value:b.name,onChange:O,className:"register-login__input",placeholder:"Fill in your name",id:"register-name",minLength:"2",maxLength:"30",required:!0}),Object(a.jsx)("span",{className:"register-login__error",children:m.name||""})]}),Object(a.jsx)("p",{className:"register-login__error-total",children:l}),Object(a.jsx)(v,{type:"submit",buttonClasses:"button_type_text button_type_submit register-login__button",disabled:!f,children:r})]}),Object(a.jsxs)("div",{className:"register-login__link-box",children:["or\xa0",Object(a.jsx)("button",{className:"register-login__link popup__link",onClick:s,children:o})]})]})};var Y=function(e){var t=e.openPopup,n=e.handleLogin,c=e.setErrorTotal,s=Object(m.a)(e,["openPopup","handleLogin","setErrorTotal"]);return Object(a.jsx)(J,Object(d.a)({title:"Login",switchForm:function(){t("register"),c("")},handleSubmit:n,buttonName:"Log in",linkName:"Sign up",setErrorTotal:c},s))};var G=function(e){var t=e.openPopup,n=e.handleRegister,c=e.setErrorTotal,s=Object(m.a)(e,["openPopup","handleRegister","setErrorTotal"]);return Object(a.jsx)(J,Object(d.a)({title:"Sign up",switchForm:function(){t("login"),c("")},handleSubmit:n,buttonName:"Sign up",linkName:"Log in",setErrorTotal:c},s))};n(61);var V=function(e){var t=e.openPopup;return Object(a.jsxs)("div",{className:"register-success",children:[Object(a.jsx)("h2",{className:"popup__title register-success__title ",children:"You've successfully registered!"}),Object(a.jsx)("button",{className:"popup__link register-success__link",onClick:function(){t("login")},children:"Log in"})]})};var H=function(e){var t=e.openedPopup,n=e.openPopup,c=e.closePopup,s=Object(m.a)(e,["openedPopup","openPopup","closePopup"]);function r(e){"Escape"===e.key&&(window.removeEventListener("keydown",r),c())}return t&&window.addEventListener("keydown",(function(e){return r(e)})),Object(a.jsx)("section",{className:"popup ".concat(t&&"popup_opened"),onClick:function(e){e.target===e.currentTarget&&(window.removeEventListener("keydown",r),c())},children:Object(a.jsxs)("div",{className:"popup__container",children:[Object(a.jsx)("button",{className:"button button_type_close",onClick:c}),"login"===t&&Object(a.jsx)(Y,Object(d.a)({type:t,openPopup:n},s)),"register"===t&&Object(a.jsx)(G,Object(d.a)({type:t,openPopup:n},s)),"register-success"===t&&Object(a.jsx)(V,Object(d.a)({type:t,openPopup:n},s))]})})},K=function(e){var t=e.isLoggedIn,n=e.component,c=Object(m.a)(e,["isLoggedIn","component"]);return Object(a.jsx)(b.b,{exact:!0,path:"/saved-news",children:function(){return!0===t?Object(a.jsx)(n,Object(d.a)({},c)):Object(a.jsx)(b.a,{to:"/sign-up"})}})};n(62);var W=function(e){var t=e.closePopup;return Object(a.jsx)("div",{className:"overlay",onClick:t})},Z="https://news-explorer-back.herokuapp.com",Q={"Content-Type":"application/json",Accept:"application/json"},X={KEY:"68277cb3c12a4fb7b2a10b5ebfc04a34",BASE_URL:"https://nomoreparties.co/news/v2/",PAGE_SIZE:100},$=function(e){return e.json().then((function(t){return e.ok?t:Promise.reject(t)}))},ee="jwt",te=n(16),ne=n(17);function ae(e){return e.ok?e.json():Promise.reject(new Error("Error: ".concat(e.status)))}var ce=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(te.a)(this,e),this._baseUrl=n,this._headers=a,this.getResponseData=ae.bind(this)}return Object(ne.a)(e,[{key:"getItems",value:function(e){var t=this;return fetch(this._baseUrl.concat(e),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",authorization:"Bearer ".concat(localStorage.getItem("jwt"))}}).then((function(e){return t.getResponseData(e)}))}},{key:"saveArticle",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/articles"),{method:"POST",headers:Object(d.a)(Object(d.a)({},this._headers),{},{authorization:"Bearer ".concat(localStorage.getItem("jwt"))}),body:JSON.stringify(e)}).then((function(e){return t.getResponseData(e)}))}},{key:"deleteArticle",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/articles/").concat(e),{method:"DELETE",headers:Object(d.a)(Object(d.a)({},this._headers),{},{authorization:"Bearer ".concat(localStorage.getItem("jwt"))})}).then((function(e){return t.getResponseData(e)}))}}]),e}())({baseUrl:Z,headers:Q}),se={year:"numeric",month:"2-digit",day:"2-digit"},re=new Intl.DateTimeFormat("sv",se).format(Date.now()),oe=new Intl.DateTimeFormat("sv",se).format(Date.now()-6048e5);function ie(e){return e.ok?e.json():Promise.reject(new Error("Error: ".concat(e.status)))}var le=new(function(){function e(t){Object(te.a)(this,e),this._newsApiConfig=t,this._baseUrl=t.BASE_URL,this.getResponseData=ie.bind(this)}return Object(ne.a)(e,[{key:"getArticles",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"everything?")+"q=".concat(e,"&")+"apiKey=".concat(this._newsApiConfig.KEY,"&")+"from=".concat(re,"&")+"to=".concat(oe,"&")+"pageSize=".concat(this._newsApiConfig.PAGE_SIZE),{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return t.getResponseData(e)}))}}]),e}())(X);var ue=function(){var e=Object(c.useState)({name:"",_id:null,email:"",password:""}),t=Object(j.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(""),o=Object(j.a)(r,2),i=o[0],m=o[1],p=Object(c.useState)("dark"),f=Object(j.a)(p,2),O=f[0],g=f[1],_=Object(c.useState)(!1),v=Object(j.a)(_,2),x=v[0],N=v[1],w=Object(c.useState)(!1),k=Object(j.a)(w,2),S=k[0],E=k[1],C=Object(b.g)(),A=Object(c.useState)([]),T=Object(j.a)(A,2),P=T[0],I=T[1],D=Object(c.useState)(""),R=Object(j.a)(D,2),M=R[0],z=R[1],B=Object(c.useState)(""),J=Object(j.a)(B,2),Y=J[0],G=J[1],V=Object(c.useState)([]),X=Object(j.a)(V,2),te=X[0],ne=X[1],ae=Object(c.useCallback)((function(){if(localStorage.getItem("localNews")){var e=JSON.parse(localStorage.getItem("localNews")).data;ne(e),z("found")}else z("")}),[ne]),se=function(e){m(e)},re=function(e){E(e)},oe=function(){re(!1),m("")},ie=function(){window.scrollTo(0,0)};Object(c.useEffect)((function(){ae()}),[ae,C]),Object(c.useEffect)((function(){var e,t=localStorage.getItem(ee);t&&(t&&(e=t,fetch("".concat(Z,"/users/me"),{method:"GET",headers:{HEADERS:Q,Authorization:"Bearer ".concat(e)}}).then((function(e){return $(e)}))).then((function(e){s(e),N(!0),C.push("/")})).catch((function(e){console.log("getContent: ".concat(e))})))}),[x,C]),Object(c.useEffect)((function(){x&&ce.getItems("/articles").then((function(e){I(e)})).catch((function(e){console.log("getSavedArticles: ".concat(e))}))}),[x,C]);var ue=function(e){ce.deleteArticle(e).then((function(e){return I(P.filter((function(t){return t._id!==e._id})))})).catch((function(e){console.log("On article delete: ".concat(e))}))},de=function(e){ce.saveArticle(e).then((function(e){return I([e].concat(Object(l.a)(P)))})).catch((function(e){console.log("On article save: ".concat(e))}))};return Object(a.jsx)(h.Provider,{value:n,children:Object(a.jsxs)("div",{className:"app",children:[Object(a.jsx)(F,{theme:O,isLoggedIn:x,openPopup:se,openedPopup:i,signOut:function(){localStorage.removeItem(ee),ne([]),z(""),m(""),localStorage.removeItem("localNews"),N(!1),C.push("/sign-in")},isNavMenuOpened:S,scrollToTop:ie,toggleNavMenu:re,currentUser:n}),S&&Object(a.jsx)(W,{closePopup:oe}),Object(a.jsx)(H,{openedPopup:i,openPopup:se,closePopup:oe,handleLogin:function(e,t,n){(function(e,t){return fetch("".concat(Z,"/signin"),{method:"POST",headers:Q,body:JSON.stringify({email:e,password:t})}).then((function(e){return $(e)}))})(e,t).then((function(e){if(!e)return G("Something went wrong on authorization"),!1;if(e.token)return t=e.token,localStorage.setItem(ee,t),G(""),n(),s({email:e.email,name:e.name}),N(!0),m(""),C.push("/"),x;var t;throw new Error("Something went wrong on authorization")})).catch((function(e){return G("".concat(e.message)),401===e.status?console.log("User with this email is not found : ".concat(e)):400===e.status?console.log("One of the inputs is not filled in : ".concat(e)):console.log("App authorize Error: ".concat(e.message))}))},handleRegister:function(e,t,n,a){(function(e,t,n){return fetch("".concat(Z,"/signup"),{method:"POST",headers:Q,body:JSON.stringify({email:e,password:t,name:n})}).then((function(e){return $(e)}))})(e,t,a).then((function(e){e&&(G(""),n(),m("register-success"),C.push("/sign-in"))})).catch((function(e){G("".concat(e.message)),console.log("App onRegister: ".concat(e.message))}))},errorTotal:Y,setErrorTotal:G,onChange:function(e){var t=e.target,n=t.name,a=t.value;s((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(u.a)({},n,a))}))}}),Object(a.jsxs)(b.d,{children:[Object(a.jsx)(K,{path:"/saved-news",isLoggedIn:x,component:U,setTheme:g,savedArticles:P,handleSaveArticle:de,handleDeleteArticle:ue}),Object(a.jsx)(b.b,{exact:!0,path:"/",children:Object(a.jsx)(L,{isLoggedIn:x,cards:te,searchState:M,setSearchState:z,handleSearch:function(e){z("searching"),le.getArticles(e).then((function(t){if(0!==t.articles.length){var n=t.articles.map((function(t){return{keyword:e,title:t.title,text:t.description,date:t.publishedAt,source:t.source.name,link:t.url,image:t.urlToImage||y}}));!function(e){localStorage.setItem("localNews",JSON.stringify({data:e}))}(n),ne(n),z("found")}else z("notFound")})).catch((function(e){z("error"),console.log("handleSearch: ".concat(e))}))},handleSaveArticle:de,handleDeleteArticle:ue,savedArticles:P})}),Object(a.jsx)(b.b,{path:"*",children:Object(a.jsx)(b.a,{to:"/"})})]}),Object(a.jsx)(q,{scrollToTop:ie})]})})};o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(i.a,{children:Object(a.jsx)(ue,{})})}),document.getElementById("root"))}]),[[63,1,2]]]);
//# sourceMappingURL=main.bcca55df.chunk.js.map